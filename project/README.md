## Feedback System — Documentation

### Overview
A full-stack feedback collection system. The frontend (React + MUI) lets users submit feedback and provides a simple admin view to browse submissions. The backend (Node.js + Express + Mongoose) exposes REST endpoints and persists data in MongoDB.


## API Documentation
Base URL: `http://localhost:4000`

- **Health Check**
  - Method: GET
  - Path: `/health`
  - Response:

```json
{ "ok": true }
```

- **Create Feedback**
  - Method: POST
  - Path: `/feedback`
  - Body (JSON):

```json
{
  "name": "Jane Doe",
  "email": "jane@example.com",
  "phone": "9876543210",
  "rating": 5,
  "feedback": "Great experience!"
}
```

  - Success Response: 201

```json
{
  "data": {
    "_id": "6731f8b0f1...",
    "name": "Jane Doe",
    "email": "jane@example.com",
    "phone": "9876543210",
    "rating": 5,
    "feedback": "Great experience!",
    "createdAt": "2025-11-11T10:00:00.000Z",
    "updatedAt": "2025-11-11T10:00:00.000Z",
    "__v": 0
  }
}
```

  - Error Responses:
    - 400: `{ "message": "All fields are required" }`
    - 500: `{ "message": "Internal server error" }`

  - cURL:

```bash
curl -X POST http://localhost:4000/feedback \
  -H "Content-Type: application/json" \
  -d '{
    "name":"Jane Doe",
    "email":"jane@example.com",
    "phone":"9876543210",
    "rating":5,
    "feedback":"Great experience!"
  }'
```

- **List Feedback (Paginated)**
  - Method: GET
  - Path: `/feedback`
  - Query Params:
    - `page` (number, optional, default 0, min 0)
    - `limit` (number, optional, default 10, min 1, max 100)
  - Example: `GET /feedback?page=0&limit=10`
  - Success Response: 200

```json
{
  "data": [
    {
      "_id": "6731f8b0f1...",
      "name": "Jane Doe",
      "email": "jane@example.com",
      "phone": "9876543210",
      "rating": 5,
      "feedback": "Great experience!",
      "createdAt": "2025-11-11T10:00:00.000Z",
      "updatedAt": "2025-11-11T10:00:00.000Z",
      "__v": 0
    }
  ],
  "total": 1,
  "page": 0,
  "limit": 10
}
```

  - Error Responses:
    - 500: `{ "message": "Internal server error" }`

  - cURL:

```bash
curl "http://localhost:4000/feedback?page=0&limit=10"
```


### Postman Usage
- Create a collection with the two requests above.
- Set an environment variable `baseUrl` to `http://localhost:4000` and reference it as `{{baseUrl}}/feedback` and `{{baseUrl}}/health`.


## Database Schema
MongoDB with Mongoose. Single collection: `feedback`.

- **Feedback**
  - `name` (String, required, trimmed)
  - `email` (String, required, trimmed)
  - `phone` (String, required, trimmed)
  - `rating` (Number, required, min 1, max 5)
  - `feedback` (String, required, trimmed)
  - `createdAt` (Date, autogenerated)
  - `updatedAt` (Date, autogenerated)

Indexes: default `_id` index; `timestamps` enabled.


## Data Flow Diagram & Project Architecture

### High-Level Data Flow

```
[User] ──fills form──> [React UI]
   │                     │
   │     POST /feedback  │ apiPost('/feedback', body)
   └────────────────────>│
                         ▼
                   [Express API]
                         │ validates body
                         │ uses Mongoose model
                         ▼
                      [MongoDB]

[Admin] ──views table──> [React AdminPanel]
   │                     │
   │    GET /feedback    │ apiGet('/feedback?page=&limit=')
   └────────────────────>│
                         ▼
                   [Express API] ──> [MongoDB] ──> returns paginated list
```

### Project Structure
- Backend: Node.js, Express, Mongoose
  - `server/src/server.js`: app bootstrap, middleware, route mounting, Mongo connection.
  - `server/src/routes/feedback.js`: POST/GET handlers.
  - `server/src/models/Feedback.js`: Mongoose schema and model.
- Frontend: React + TypeScript + MUI
  - `src/components/FeedbackForm.tsx`: client-side validation and submit.
  - `src/components/AdminPanel.tsx`: pagination UI; fetches list.
  - `src/components/AdminLogin.tsx`: simple client-side login gate (UI-level only).
  - `src/lib/api.ts`: `apiGet`, `apiPost` helpers.

### Runtime Architecture
- Client (Vite + React) calls REST endpoints on the Express server.
- Server uses `cors` and `express.json()` to accept requests from the frontend.
- MongoDB stores feedback documents via Mongoose.


## Challenges Faced and Solutions Implemented
- **Input Validation and Data Cleaning**
  - Challenge: Ensuring only well-formed feedback is saved.
  - Solution: Backend validates presence of all fields and trims strings; rating is coerced to a bounded number. Mongoose adds a second layer with required fields and min/max.

- **Pagination for Admin Listing**
  - Challenge: Efficiently browsing potentially large feedback sets.
  - Solution: Server accepts `page` and `limit`, calculates `skip`, sorts by `createdAt desc`, and returns `{ data, total, page, limit }`. Frontend binds Material UI pagination controls to these values.

- **Error Handling and UX Feedback**
  - Challenge: Communicating failures clearly to users.
  - Solution: Standardized 400 for validation issues and 500 for server errors; frontend displays success/error alerts and loading spinners.

- **Cross-Origin Requests (CORS) and JSON Parsing**
  - Challenge: Local dev across ports.
  - Solution: Enabled `cors()` and `express.json()` globally.

- **Configuration and Local Development**
  - Challenge: Reliable local setup without surprises.
  - Solution: Sensible defaults with environment overrides:
    - `PORT` defaults to `4000`
    - `MONGODB_URI` defaults to `mongodb://127.0.0.1:27017/feedback_app`


## Setup & Run

### Backend
1. `cd project/server`
2. `npm install`
3. Create `.env` (optional):

```env
PORT=4000
MONGODB_URI=mongodb://127.0.0.1:27017/feedback_app
```

4. `npm run dev`

### Frontend
1. `cd project`
2. `npm install`
3. `npm run dev`

Open the app in the browser and ensure the backend is running at `http://localhost:4000`.


